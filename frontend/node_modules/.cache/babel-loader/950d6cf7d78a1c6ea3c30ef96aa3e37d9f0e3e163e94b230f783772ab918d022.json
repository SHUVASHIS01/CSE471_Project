{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef, useCallback } from 'react';\n\n/**\r\n * Custom hook for session timeout with warning dialog\r\n * Shows warning 1 minute before logout (2 minute total timeout)\r\n */\nexport const useSessionTimeout = (onLogout, onWarning) => {\n  _s();\n  const timeoutRef = useRef(null);\n  const warningTimeoutRef = useRef(null);\n  const lastActivityRef = useRef(Date.now());\n  const onLogoutRef = useRef(onLogout);\n  const onWarningRef = useRef(onWarning);\n  const isActiveRef = useRef(true);\n\n  // Update refs when callbacks change\n  useEffect(() => {\n    onLogoutRef.current = onLogout;\n    onWarningRef.current = onWarning;\n  }, [onLogout, onWarning]);\n  const sessionTimeoutMs = 3 * 60 * 1000; // 3 minutes total (180 seconds)\n  const warningTimeMs = 1 * 60 * 1000; // 1 minute warning (60 seconds) - shows at 2 minute mark\n\n  /**\r\n   * Reset the session timeout timers\r\n   */\n  const resetSessionTimeout = useCallback(() => {\n    console.log('[useSessionTimeout] ðŸ”„ Resetting timers - warning in 2 min, logout in 3 min');\n\n    // Clear existing timeouts\n    if (timeoutRef.current) clearTimeout(timeoutRef.current);\n    if (warningTimeoutRef.current) clearTimeout(warningTimeoutRef.current);\n\n    // Reset activity time\n    lastActivityRef.current = Date.now();\n\n    // Set warning timeout (show warning after 2 minutes of inactivity)\n    warningTimeoutRef.current = setTimeout(() => {\n      console.log('[useSessionTimeout] âš ï¸ WARNING TRIGGERED - 2 minutes of inactivity');\n      if (onWarningRef.current) {\n        console.log('[useSessionTimeout] Calling onWarning callback');\n        onWarningRef.current();\n      }\n    }, sessionTimeoutMs - warningTimeMs);\n\n    // Set logout timeout (logout after 3 minutes total)\n    timeoutRef.current = setTimeout(() => {\n      console.log('[useSessionTimeout] ðŸšª LOGOUT TRIGGERED - 3 minutes total');\n      if (onLogoutRef.current) {\n        console.log('[useSessionTimeout] Calling onLogout callback');\n        onLogoutRef.current();\n      }\n    }, sessionTimeoutMs);\n  }, [sessionTimeoutMs, warningTimeMs]);\n\n  /**\r\n   * Track user activity and reset timeout\r\n   */\n  const trackActivity = useCallback(() => {\n    const now = Date.now();\n    const timeSinceLastActivity = now - lastActivityRef.current;\n    console.log(`[useSessionTimeout] ðŸ‘† Activity detected (${timeSinceLastActivity}ms since last)`);\n    resetSessionTimeout();\n  }, [resetSessionTimeout]);\n\n  /**\r\n   * Manually extend session\r\n   */\n  const extendSession = useCallback(() => {\n    console.log('[useSessionTimeout] Session extended by user');\n    trackActivity();\n  }, [trackActivity]);\n  useEffect(() => {\n    console.log('[useSessionTimeout] âœ… Hook mounted and activating');\n    isActiveRef.current = true;\n\n    // Initial setup\n    resetSessionTimeout();\n\n    // Track various user activities\n    const handleActivity = () => trackActivity();\n\n    // Add mouse events\n    window.addEventListener('mousemove', handleActivity);\n    window.addEventListener('click', handleActivity);\n    window.addEventListener('mousedown', handleActivity);\n    window.addEventListener('mouseup', handleActivity);\n\n    // Add keyboard events\n    window.addEventListener('keydown', handleActivity);\n    window.addEventListener('keypress', handleActivity);\n    window.addEventListener('keyup', handleActivity);\n\n    // Add touch events\n    window.addEventListener('touchstart', handleActivity);\n    window.addEventListener('touchmove', handleActivity);\n    window.addEventListener('touchend', handleActivity);\n\n    // Add scroll event\n    window.addEventListener('scroll', handleActivity);\n\n    // Handle tab visibility change\n    const handleVisibilityChange = () => {\n      console.log('[useSessionTimeout] Visibility changed, hidden:', document.hidden);\n      if (!document.hidden) {\n        trackActivity();\n      }\n    };\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n\n    // Handle API activity\n    const handleApiActivity = () => trackActivity();\n    window.addEventListener('api-activity', handleApiActivity);\n    console.log('[useSessionTimeout] Event listeners added successfully');\n\n    // Cleanup function\n    return () => {\n      console.log('[useSessionTimeout] Cleaning up event listeners and timeouts');\n\n      // Remove mouse events\n      window.removeEventListener('mousemove', handleActivity);\n      window.removeEventListener('click', handleActivity);\n      window.removeEventListener('mousedown', handleActivity);\n      window.removeEventListener('mouseup', handleActivity);\n\n      // Remove keyboard events\n      window.removeEventListener('keydown', handleActivity);\n      window.removeEventListener('keypress', handleActivity);\n      window.removeEventListener('keyup', handleActivity);\n\n      // Remove touch events\n      window.removeEventListener('touchstart', handleActivity);\n      window.removeEventListener('touchmove', handleActivity);\n      window.removeEventListener('touchend', handleActivity);\n\n      // Remove scroll event\n      window.removeEventListener('scroll', handleActivity);\n\n      // Remove other listeners\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n      window.removeEventListener('api-activity', handleApiActivity);\n\n      // Clear timeouts\n      if (timeoutRef.current) clearTimeout(timeoutRef.current);\n      if (warningTimeoutRef.current) clearTimeout(warningTimeoutRef.current);\n    };\n  }, [resetSessionTimeout, trackActivity]);\n  return {\n    extendSession,\n    resetTimeout: trackActivity,\n    getLastActivity: () => lastActivityRef.current\n  };\n};\n_s(useSessionTimeout, \"qX9Rj4JuMdPPaYtfXNMyeLKRcbM=\");","map":{"version":3,"names":["useEffect","useRef","useCallback","useSessionTimeout","onLogout","onWarning","_s","timeoutRef","warningTimeoutRef","lastActivityRef","Date","now","onLogoutRef","onWarningRef","isActiveRef","current","sessionTimeoutMs","warningTimeMs","resetSessionTimeout","console","log","clearTimeout","setTimeout","trackActivity","timeSinceLastActivity","extendSession","handleActivity","window","addEventListener","handleVisibilityChange","document","hidden","handleApiActivity","removeEventListener","resetTimeout","getLastActivity"],"sources":["E:/CSE471JOBPortal_M3_FOR REPORT WRITING/CSE471JOBPortal_M3/frontend/src/hooks/useSessionTimeout.js"],"sourcesContent":["import { useEffect, useRef, useCallback } from 'react';\r\n\r\n/**\r\n * Custom hook for session timeout with warning dialog\r\n * Shows warning 1 minute before logout (2 minute total timeout)\r\n */\r\nexport const useSessionTimeout = (onLogout, onWarning) => {\r\n  const timeoutRef = useRef(null);\r\n  const warningTimeoutRef = useRef(null);\r\n  const lastActivityRef = useRef(Date.now());\r\n  const onLogoutRef = useRef(onLogout);\r\n  const onWarningRef = useRef(onWarning);\r\n  const isActiveRef = useRef(true);\r\n\r\n  // Update refs when callbacks change\r\n  useEffect(() => {\r\n    onLogoutRef.current = onLogout;\r\n    onWarningRef.current = onWarning;\r\n  }, [onLogout, onWarning]);\r\n\r\n  const sessionTimeoutMs = 3 * 60 * 1000; // 3 minutes total (180 seconds)\r\n  const warningTimeMs = 1 * 60 * 1000; // 1 minute warning (60 seconds) - shows at 2 minute mark\r\n\r\n  /**\r\n   * Reset the session timeout timers\r\n   */\r\n  const resetSessionTimeout = useCallback(() => {\r\n    console.log('[useSessionTimeout] ðŸ”„ Resetting timers - warning in 2 min, logout in 3 min');\r\n\r\n    // Clear existing timeouts\r\n    if (timeoutRef.current) clearTimeout(timeoutRef.current);\r\n    if (warningTimeoutRef.current) clearTimeout(warningTimeoutRef.current);\r\n\r\n    // Reset activity time\r\n    lastActivityRef.current = Date.now();\r\n\r\n    // Set warning timeout (show warning after 2 minutes of inactivity)\r\n    warningTimeoutRef.current = setTimeout(() => {\r\n      console.log('[useSessionTimeout] âš ï¸ WARNING TRIGGERED - 2 minutes of inactivity');\r\n      if (onWarningRef.current) {\r\n        console.log('[useSessionTimeout] Calling onWarning callback');\r\n        onWarningRef.current();\r\n      }\r\n    }, sessionTimeoutMs - warningTimeMs);\r\n\r\n    // Set logout timeout (logout after 3 minutes total)\r\n    timeoutRef.current = setTimeout(() => {\r\n      console.log('[useSessionTimeout] ðŸšª LOGOUT TRIGGERED - 3 minutes total');\r\n      if (onLogoutRef.current) {\r\n        console.log('[useSessionTimeout] Calling onLogout callback');\r\n        onLogoutRef.current();\r\n      }\r\n    }, sessionTimeoutMs);\r\n  }, [sessionTimeoutMs, warningTimeMs]);\r\n\r\n  /**\r\n   * Track user activity and reset timeout\r\n   */\r\n  const trackActivity = useCallback(() => {\r\n    const now = Date.now();\r\n    const timeSinceLastActivity = now - lastActivityRef.current;\r\n    console.log(`[useSessionTimeout] ðŸ‘† Activity detected (${timeSinceLastActivity}ms since last)`);\r\n    resetSessionTimeout();\r\n  }, [resetSessionTimeout]);\r\n\r\n  /**\r\n   * Manually extend session\r\n   */\r\n  const extendSession = useCallback(() => {\r\n    console.log('[useSessionTimeout] Session extended by user');\r\n    trackActivity();\r\n  }, [trackActivity]);\r\n\r\n  useEffect(() => {\r\n    console.log('[useSessionTimeout] âœ… Hook mounted and activating');\r\n    isActiveRef.current = true;\r\n    \r\n    // Initial setup\r\n    resetSessionTimeout();\r\n\r\n    // Track various user activities\r\n    const handleActivity = () => trackActivity();\r\n\r\n    // Add mouse events\r\n    window.addEventListener('mousemove', handleActivity);\r\n    window.addEventListener('click', handleActivity);\r\n    window.addEventListener('mousedown', handleActivity);\r\n    window.addEventListener('mouseup', handleActivity);\r\n\r\n    // Add keyboard events\r\n    window.addEventListener('keydown', handleActivity);\r\n    window.addEventListener('keypress', handleActivity);\r\n    window.addEventListener('keyup', handleActivity);\r\n\r\n    // Add touch events\r\n    window.addEventListener('touchstart', handleActivity);\r\n    window.addEventListener('touchmove', handleActivity);\r\n    window.addEventListener('touchend', handleActivity);\r\n\r\n    // Add scroll event\r\n    window.addEventListener('scroll', handleActivity);\r\n\r\n    // Handle tab visibility change\r\n    const handleVisibilityChange = () => {\r\n      console.log('[useSessionTimeout] Visibility changed, hidden:', document.hidden);\r\n      if (!document.hidden) {\r\n        trackActivity();\r\n      }\r\n    };\r\n    document.addEventListener('visibilitychange', handleVisibilityChange);\r\n\r\n    // Handle API activity\r\n    const handleApiActivity = () => trackActivity();\r\n    window.addEventListener('api-activity', handleApiActivity);\r\n\r\n    console.log('[useSessionTimeout] Event listeners added successfully');\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      console.log('[useSessionTimeout] Cleaning up event listeners and timeouts');\r\n      \r\n      // Remove mouse events\r\n      window.removeEventListener('mousemove', handleActivity);\r\n      window.removeEventListener('click', handleActivity);\r\n      window.removeEventListener('mousedown', handleActivity);\r\n      window.removeEventListener('mouseup', handleActivity);\r\n\r\n      // Remove keyboard events\r\n      window.removeEventListener('keydown', handleActivity);\r\n      window.removeEventListener('keypress', handleActivity);\r\n      window.removeEventListener('keyup', handleActivity);\r\n\r\n      // Remove touch events\r\n      window.removeEventListener('touchstart', handleActivity);\r\n      window.removeEventListener('touchmove', handleActivity);\r\n      window.removeEventListener('touchend', handleActivity);\r\n\r\n      // Remove scroll event\r\n      window.removeEventListener('scroll', handleActivity);\r\n\r\n      // Remove other listeners\r\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n      window.removeEventListener('api-activity', handleApiActivity);\r\n\r\n      // Clear timeouts\r\n      if (timeoutRef.current) clearTimeout(timeoutRef.current);\r\n      if (warningTimeoutRef.current) clearTimeout(warningTimeoutRef.current);\r\n    };\r\n  }, [resetSessionTimeout, trackActivity]);\r\n\r\n  return {\r\n    extendSession,\r\n    resetTimeout: trackActivity,\r\n    getLastActivity: () => lastActivityRef.current\r\n  };\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}